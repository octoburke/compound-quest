const { app } = require('@azure/functions');
const axios = require('axios');

app.http('GetWords', {
    methods: ['GET'],
    authLevel: 'anonymous',
    route: "words",
    handler: async (request, context) => {
        try {
            const compoundWord = words[Math.floor(Math.random() * words.length)];
            const apiKey = process.env.OPENAI_API_KEY;

            const prompt = `Split this compound word into its parts and provide a hint for the full word. Be creative with your hints. For example "Bluebell" becomes {"word": "Bluebell", "prefix": "Blue", "suffix": "bell", "hint": "Ring this small metal object"}. Or If I gave you "Crossword", you might respond with {"word": "Crossword", "prefix": "Cross", "suffix": "Word", "hint": "A puzzle often found in newspapers" } The word is: ${compoundWord}`;

            const response = await axios.post(
                'https://api.openai.com/v1/chat/completions', // Updated endpoint
                {
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    temperature: 0.7,
                    max_tokens: 150
                },
                {
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                    },
                }
            );

            const {word, prefix, suffix, hint} = JSON.parse(response.data.choices[0].message.content);

            return {
                jsonBody: {
                    word,
                    prefix,
                    suffix,
                    hint
                }
            };
        } catch (error) {
            context.log('Error:', error);
            return {
                status: 500,
                jsonBody: { error: 'Failed to get word hint' }
            };
        }
    }
});

const words = [
    "Aboveboard",
    "Afterbirth",
    "Afterburner",
    "Afterglow",
    "Afterimage",
    "Afterlife",
    "Aftermath",
    "Afternoon",
    "Airbrush",
    "Aircraft",
    "Airfield",
    "Airlift",
    "Airline",
    "Airliner",
    "Airmail",
    "Airman",
    "Airmen",
    "Airplane",
    "Airport",
    "Airship",
    "Airtime",
    "Allover",
    "Allspice",
    "Alongside",
    "Also",
    "Another",
    "Anybody",
    "Anyhow",
    "Anymore",
    "Anyone",
    "Anyplace",
    "Anything",
    "Anytime",
    "Anyway",
    "Anywhere",
    "Armchair",
    "Armpit",
    "Around",
    "Arrowhead",
    "Ashtray",
    "Authorship",
    "Babysit",
    "Babysitter",
    "Backache",
    "Backbite",
    "Backbone",
    "Backbreaker",
    "Backdrop",
    "Backfield",
    "Backfire",
    "Background",
    "Backhand",
    "Backlash",
    "Backlog",
    "Backpack",
    "Backside",
    "Backslap",
    "Backslide",
    "Backspace",
    "Backspin",
    "Backstage",
    "Backstop",
    "Backstretch",
    "Backstroke",
    "Backtrack",
    "Backward",
    "Ballpark",
    "Ballroom",
    "Bankbook",
    "Bankroll",
    "Baseball",
    "Basketball",
    "Beachcomb",
    "Became",
    "Because",
    "Become",
    "Bedbug",
    "Bedclothes",
    "Bedrock",
    "Bedroll",
    "Bedroom",
    "Bellbottom",
    "Bellboy",
    "Bellhop",
    "Below",
    "Birthday",
    "Blackball",
    "Blackberries",
    "Blackbird",
    "Blackboard",
    "Blackjack",
    "Blacklist",
    "Blackmail",
    "Blackout",
    "Blacksmith",
    "Blacktop",
    "Bluebell",
    "Blueberry",
    "Bluebird",
    "Bluefish",
    "Bluegrass",
    "Blueprint",
    "Boardwalk",
    "Bodyguard",
    "Bodywork",
    "Boldface",
    "Bookbinder",
    "Bookcase",
    "Bookend",
    "Bookkeeper",
    "Booklet",
    "Bookmark",
    "Bookmobile",
    "Bookseller",
    "Bookshelf",
    "Bookstore",
    "Bookworm",
    "Bootstrap",
    "Bowtie",
    "Brainchild",
    "Brainstorm",
    "Brainwash",
    "Bugspray",
    "Bushfire",
    "Buttercup",
    "Butterfat",
    "Butterfingers",
    "Butterflies",
    "Buttermilk",
    "Butternut",
    "Butterscotch",
    "Bypass",
    "Cabdriver",
    "Cancan",
    "Candid",
    "Candlelight",
    "Candlestick",
    "Cannot",
    "Cardboard",
    "Cardsharp",
    "Cardstock",
    "Carefree",
    "Caretaker",
    "Careworn",
    "Carfare",
    "Cargo",
    "Carhop",
    "Carload",
    "Carpetbagger",
    "Carpool",
    "Carport",
    "Carrack",
    "Carryall",
    "Carsick",
    "Cartwheel",
    "Carwash",
    "Cattail",
    "Catwalk",
    "Caveman",
    "Centercut",
    "Cheeseburger",
    "Cheesecake",
    "Classmate",
    "Clockwise",
    "Coffeemaker",
    "Comeback",
    "Comedown",
    "Commonplace",
    "Commonwealth",
    "Cornball",
    "Cornmeal",
    "Cornstalk",
    "Cornwall",
    "Cottonmouth",
    "Cottontail",
    "Cottonwood",
    "Countdown",
    "Counterattack",
    "Counterbalance",
    "Counterclockwise",
    "Counterintelligence",
    "Countermeasure",
    "Counteroffensive",
    "Counterpane",
    "Counterpart",
    "Counterpoint",
    "Counterpoise",
    "Courthouse",
    "Courtroom",
    "Courtyard",
    "Crewcut",
    "Crossbow",
    "Crossbreed",
    "Crosscut",
    "Crossover",
    "Crossroad",
    "Crosstown",
    "Crosswalk",
    "Crossword",
    "Cupcake",
    "Dairymaid",
    "Daisywheel",
    "Daybed",
    "Daybook",
    "Daybreak",
    "Daydream",
    "Daylight",
    "Daytime",
    "Deadend",
    "Deadline",
    "Dishcloth",
    "Dishpan",
    "Dishwasher",
    "Dishwater",
    "Diskdrive",
    "Dogwood",
    "Doorstop",
    "Downbeat",
    "Downunder",
    "Drawbridge",
    "Driveway",
    "Duckbill",
    "Duckpin",
    "Earache",
    "Eardrop",
    "Eardrum",
    "Earring",
    "Earthbound",
    "Earthquake",
    "Earthward",
    "Earthworm",
    "Egghead",
    "Eggshell",
    "Elsewhere",
    "Everyone",
    "Everything",
    "Eyeball",
    "Eyeballs",
    "Eyebrow",
    "Eyecatching",
    "Eye-catching",
    "Eyeglasses",
    "Eyelash",
    "Eyelid",
    "Eyesight",
    "Eyewitness",
    "Fatherland",
    "Fatherless",
    "Firearm",
    "Fireball",
    "Fireboat",
    "Firebomb",
    "Firebox",
    "Firebreak",
    "Firecracker",
    "Firefighter",
    "Fireflies",
    "Firehouse",
    "Fireman",
    "Fireproof",
    "Firewater",
    "Fireworks",
    "Fishbowl",
    "Fisherman",
    "Fisheye",
    "Fishhook",
    "Fishlike",
    "Fishmonger",
    "Fishnet",
    "Fishpond",
    "Fishtail",
    "Flashlight",
    "Football",
    "Foothill",
    "Foothold",
    "Footlights",
    "Footlocker",
    "Footnote",
    "Footpath",
    "Footprints",
    "Footrest",
    "Forbearer",
    "Forbid",
    "Forearm",
    "Forebear",
    "Forecast",
    "Forecastle",
    "Foreclose",
    "Foreclosure",
    "Foredoom",
    "Forefather",
    "Forefinger",
    "Forefront",
    "Forehand",
    "Forehead",
    "Foreleg",
    "Foreman",
    "Foremost",
    "Forepaws",
    "Forerunner",
    "Foresee",
    "Foresight",
    "Forestall",
    "Forestland",
    "Forever",
    "Forget",
    "Forgive",
    "Forklift",
    "Format",
    "Fortnight",
    "Freelance",
    "Friendship",
    "Fruitcup",
    "Gearshift",
    "Glassmaking",
    "Goodbye",
    "Goodnight",
    "Grandaunt",
    "Grandchild",
    "Grandchildren",
    "Granddaughter",
    "Grandfather",
    "Grandmaster",
    "Grandmother",
    "Grandnephew",
    "Grandnieces",
    "Grandparent",
    "Grandson",
    "Grandstand",
    "Granduncle",
    "Grasshopper",
    "Graveyard",
    "Gumball",
    "Haircut",
    "Hamburger",
    "Hammerhead",
    "Hamstring",
    "Handball",
    "Handbook",
    "Handcuff",
    "Handgun",
    "Handmade",
    "Handout",
    "Headache",
    "Headdress",
    "Headhunter",
    "Headlight",
    "Headline",
    "Headquarters",
    "Hedgehop",
    "Heirloom",
    "Hellcat",
    "Hellhole",
    "Helpmate",
    "Helpmeet",
    "Hemstitch",
    "Henceforth",
    "Henchman",
    "Henpeck",
    "Hereabout",
    "Hereafter",
    "Hereby",
    "Herein",
    "Hereof",
    "Hereupon",
    "Herself",
    "Highball",
    "Highchair",
    "Highland",
    "Highlight",
    "Highway",
    "Himself",
    "Homemade",
    "Homesick",
    "Hometown",
    "Honeybee",
    "Honeycomb",
    "Honeydew",
    "Honeymoon",
    "Honeysuckle",
    "Hookup",
    "Hookworm",
    "Horseback",
    "Horsefly",
    "Horsehair",
    "Horseplay",
    "Horsepower",
    "Horseradish",
    "Horseshoe",
    "Houseboat",
    "Housecoat",
    "Household",
    "Housekeeper",
    "Housetop",
    "Housewife",
    "Housework",
    "However",
    "Ideal",
    "Inchworm",
    "Income",
    "Indoors",
    "Inflow",
    "Infold",
    "Infuse",
    "Infusion",
    "Inhale",
    "Inkblot",
    "Inkwell",
    "Inland",
    "Inmate",
    "Inpatient",
    "Inroad",
    "Inset",
    "Inside",
    "Intake",
    "Ironwork",
    "Itself",
    "Jackpot",
    "Jackson",
    "Jailbait",
    "Jailbird",
    "Jawbone",
    "Jawbreaker",
    "Jaywalk",
    "Jellybean",
    "Jellyfish",
    "Jerkwater",
    "Jerrybuild",
    "Jetliner",
    "Jetport",
    "Jigsaw",
    "Jimsonweed",
    "Jitterbug",
    "Jobholder",
    "Johnnycake",
    "Jumpshot",
    "Keepsake",
    "Keyboard",
    "Keyhole",
    "Keynote",
    "Keypad",
    "Keypunch",
    "Keystone",
    "Keystroke",
    "Keyway",
    "Keyword",
    "Landmark",
    "Landslide",
    "Landward",
    "Lapland",
    "Lapwing",
    "Larkspur",
    "Laughingstock",
    "Lawgiver",
    "Lawmaker",
    "Lawsuit",
    "Layman",
    "Layoff",
    "Layout",
    "Layover",
    "Leapfrog",
    "Lifeblood",
    "Lifeboat",
    "Lifeguard",
    "Lifelike",
    "Lifeline",
    "Lifelong",
    "Lifesaver",
    "Lifetime",
    "Lifework",
    "Lighthouse",
    "Limelight",
    "Limestone",
    "Lipstick",
    "Longhand",
    "Longhorn",
    "Longhouse",
    "Lukewarm",
    "Mailbox",
    "Mainland",
    "Mainline",
    "Mainspring",
    "Mainstream",
    "Makeup",
    "Matchbox",
    "Meadowland",
    "Meantime",
    "Meanwhile",
    "Moonbeam",
    "Moonlight",
    "Moonlit",
    "Moonscape",
    "Moonshine",
    "Moonstone",
    "Moonstruck",
    "Moonwalk",
    "Moreover",
    "Mothball",
    "Motherhood",
    "Motorcycle",
    "Nearby",
    "Necktie",
    "Nevermore",
    "Newborn",
    "Newfound",
    "Newsboy",
    "Newsbreak",
    "Newscast",
    "Newscaster",
    "Newsdealer",
    "Newsletter",
    "Newsman",
    "Newsmen",
    "Newspaper",
    "Newsperson",
    "Newsprint",
    "Newsreel",
    "Newsroom",
    "Newsstand",
    "Newsworthy",
    "Nightfall",
    "Nobody",
    "Noisemaker",
    "Northeast",
    "Northwest",
    "Notebook",
    "Notepad",
    "Noteworthy",
    "Nowhere",
    "Nursemaid",
    "Nutcracker",
    "Oneself",
    "Onetime",
    "Overabundance",
    "Overboard",
    "Overcoat",
    "Overflow",
    "Overland",
    "Overpass",
    "Overshoes",
    "Pacemaker",
    "Pancake",
    "Parkway",
    "Passbook",
    "Passkey",
    "Passover",
    "Passport",
    "Password",
    "Pasteboard",
    "Patchwork",
    "Pathfinder",
    "Pathway",
    "Pawnbroker",
    "Pawnshop",
    "Paycheck",
    "Payload",
    "Paymaster",
    "Payoff",
    "Payroll",
    "Peppermint",
    "Pickup",
    "Pineapple",
    "Pinhole",
    "Pinpoint",
    "Pinstripe",
    "Pinup",
    "Pinwheel",
    "Playback",
    "Playboy",
    "Playground",
    "Playhouse",
    "Playmate",
    "Playthings",
    "Ponytail",
    "Popcorn",
    "Postcard",
    "Pothole",
    "Proofread",
    "Racquetball",
    "Railroad",
    "Railway",
    "Rainbow",
    "Raincheck",
    "Raincoat",
    "Raindrop",
    "Rainfall",
    "Rainmaker",
    "Rainstorm",
    "Rainwater",
    "Ratline",
    "Ratsbane",
    "Rattlesnake",
    "Rattletrap",
    "Rawboned",
    "Rawhide",
    "Readywitted",
    "Rearmost",
    "Rearrange",
    "Rearward",
    "Redcap",
    "Redcoat",
    "Reddish",
    "Redhead",
    "Repairman",
    "Riverbank",
    "Riverbanks",
    "Rubberband",
    "Sailboat",
    "Salesclerk",
    "Sandbox",
    "Sandlot",
    "Sandstone",
    "Sandwich",
    "Saucepan",
    "Scapegoat",
    "Scarecrow",
    "Schoolbook",
    "Schoolboy",
    "Schoolbus",
    "Schoolhouse",
    "Schoolmate",
    "Schoolroom",
    "Schoolwork",
    "Seashore",
    "Setback",
    "Setoff",
    "Shadyside",
    "Sharecropper",
    "Sharpshooter",
    "Sheepskin",
    "Shipbottom",
    "Shipbuilder",
    "Shipload",
    "Shipwreck",
    "Shipyard",
    "Shoelace",
    "Shoemaker",
    "Shopkeeper",
    "Shortbread",
    "Shortcake",
    "Shotgun",
    "Showboat",
    "Showoff",
    "Showplace",
    "Showroom",
    "Sideburns",
    "Sidecar",
    "Sidekick",
    "Sideshow",
    "Sidewalk",
    "Silversmith",
    "Sisterhood",
    "Sixfold",
    "Skateboard",
    "Skintight",
    "Skylark",
    "Skylight",
    "Skyscraper",
    "Slapstick",
    "Slowdown",
    "Slumlord",
    "Snakeskin",
    "Snowball",
    "Snowbank",
    "Snowbird",
    "Snowdrift",
    "Snowshoe",
    "Snowshovel",
    "Snowstorm",
    "Soapstone",
    "Softball",
    "Software",
    "Somebody",
    "Someday",
    "Somehow",
    "Someone",
    "Someplace",
    "Something",
    "Sometime",
    "Sometimes",
    "Someway",
    "Somewhat",
    "Somewhere",
    "Soundproof",
    "Southeast",
    "Southwest",
    "Soybean",
    "Spacesuit",
    "Spacewalk",
    "Spearmint",
    "Speedboat",
    "Spillway",
    "Spokesperson",
    "Springtime",
    "Stagehand",
    "Standby",
    "Standoff",
    "Standout",
    "Standpipe",
    "Standpoint",
    "Standstill",
    "Starfish",
    "Steamboat",
    "Steamship",
    "Stepson",
    "Stickup",
    "Stockroom",
    "Stonewall",
    "Stoplight",
    "Stopwatch",
    "Storerooms",
    "Strawberry",
    "Streetcar",
    "Stronghold",
    "Subway",
    "Sunbaked",
    "Sunbathe",
    "Sunday",
    "Sundial",
    "Sundown",
    "Sunfish",
    "Sunflower",
    "Sunglasses",
    "Sunlit",
    "Sunray",
    "Sunrise",
    "Sunroof",
    "Sunshine",
    "Suntan",
    "Sunup",
    "Supercargo",
    "Supercharge",
    "Supercool",
    "Superego",
    "Superfine",
    "Supergiant",
    "Superhero",
    "Superhighways",
    "Superhuman",
    "Superimpose",
    "Superman",
    "Supermarket",
    "Supermen",
    "Supernatural",
    "Superpower",
    "Superscript",
    "Supersensitive",
    "Supersonic",
    "Superstar",
    "Superstrong",
    "Superstructure",
    "Supertanker",
    "Superweapon",
    "Superwoman",
    "Sweetheart",
    "Sweetmeat",
    "Tablecloth",
    "Tablespoon",
    "Tabletop",
    "Tableware",
    "Tadpole",
    "Tagalong",
    "Tailbone",
    "Tailcoat",
    "Tailgate",
    "Taillight",
    "Taillike",
    "Tailpiece",
    "Tailspin",
    "Takeoff",
    "Takeout",
    "Takeover",
    "Talebearer",
    "Taleteller",
    "Tapeworm",
    "Taproom",
    "Taproot",
    "Target",
    "Taskmaster",
    "Tattletale",
    "Taxicab",
    "Taxpayer",
    "Teacup",
    "Teammate",
    "Teamwork",
    "Teapot",
    "Teardrop",
    "Teaspoon",
    "Teenager",
    "Telltale",
    "Tenderfoot",
    "Tenderhearted",
    "Tenderloin",
    "Tenfold",
    "Textbook",
    "Themselves",
    "Therefore",
    "Throwaway",
    "Throwback",
    "Thunderbird",
    "Thunderbolt",
    "Thundershower",
    "Thunderstorm",
    "Timekeeper",
    "Timepieces",
    "Timesaving",
    "Timeshare",
    "Timetable",
    "Today",
    "Together",
    "Toolbox",
    "Toothbrush",
    "Toothpaste",
    "Toothpick",
    "Touchdown",
    "Township",
    "Turnabout",
    "Turnaround",
    "Turnbuckle",
    "Turncoat",
    "Turndown",
    "Turnkey",
    "Turnoff",
    "Turnover",
    "Turntable",
    "Typewriter",
    "Underachieve",
    "Underact",
    "Underage",
    "Underarm",
    "Underbelly",
    "Underbid",
    "Undercharge",
    "Underclothes",
    "Undercover",
    "Undercurrent",
    "Undercut",
    "Underdevelop",
    "Underdog",
    "Underesimate",
    "Underestimate",
    "Underexpose",
    "Underfeed",
    "Underfinance",
    "Underfoot",
    "Underfur",
    "Undergarment",
    "Undergird",
    "Undergo",
    "Undergraduate",
    "Underground",
    "Undergrowth",
    "Underhand",
    "Underhanded",
    "Underlayer",
    "Underlie",
    "Upbeat",
    "Upbringing",
    "Upcoming",
    "Update",
    "Updraft",
    "Upend",
    "Upgrade",
    "Upheaval",
    "Upheld",
    "Uphill",
    "Uphold",
    "Upkeep",
    "Upland",
    "Uplift",
    "Uplink",
    "Upload",
    "Upmarket",
    "Upon",
    "Uppercase",
    "Upperclassman",
    "Uppercut",
    "Uppermost",
    "Upright",
    "Uprising",
    "Upriver",
    "Uproar",
    "Uproot",
    "Upset",
    "Upshot",
    "Upside",
    "Upstage",
    "Upstairs",
    "Upstanding",
    "Upstart",
    "Upstate",
    "Upstream",
    "Upsurge",
    "Upswing",
    "Uptake",
    "Upthrust",
    "Uptight",
    "Uptime",
    "Uptown",
    "Upturn",
    "Upward",
    "Upwind",
    "Waistband",
    "Waistcoat",
    "Waistline",
    "Walkout",
    "Walkways",
    "Wallboard",
    "Walleyed",
    "Wallflower",
    "Wallpaper",
    "Wanderlust",
    "Wardroom",
    "Warehouse",
    "Warfare",
    "Warhead",
    "Warlike",
    "Warlord",
    "Warmblooded",
    "Warmhearted",
    "Warmonger",
    "Warpath",
    "Warplanes",
    "Warship",
    "Wartime",
    "Washboard",
    "Washbowl",
    "Washcloth",
    "Washout",
    "Washroom",
    "Washstand",
    "Washtub",
    "Wastebasket",
    "Wasteland",
    "Wastepaper",
    "Wastewater",
    "Watchband",
    "Watchcase",
    "Watchdog",
    "Watchmaker",
    "Watchman",
    "Watchtower",
    "Watchword",
    "Watercolor",
    "Watercooler",
    "Watercraft",
    "Waterfall",
    "Waterfowl",
    "Waterfront",
    "Waterline",
    "Waterlog",
    "Watermark",
    "Watermelon",
    "Waterpower",
    "Waterproof",
    "Waterscape",
    "Watershead",
    "Waterside",
    "Waterspout",
    "Watertight",
    "Waterway",
    "Waterwheel",
    "Waterworks",
    "Wavelength",
    "Wavelike",
    "Waxwork",
    "Waybill",
    "Wayfarer",
    "Waylaid",
    "Wayside",
    "Wayward",
    "Weathercock",
    "Weatherman",
    "Weatherproof",
    "Weekday",
    "Weekend",
    "Weeknight",
    "Whatever",
    "Whatsoever",
    "Wheelbarrow",
    "Wheelbase",
    "Wheelchair",
    "Wheelhouse",
    "Whitecap",
    "Whitefish",
    "Whitewall",
    "Whitewash",
    "Widespread",
    "Wipeout",
    "Without",
    "Woodshop",
    "Workplace",
    "Worldwide",
    "Wrongdoing"
]